/******************************************************/
/******************************************************/
/**************   Author: mahmoud 3id   ***************/
/**************   Layer:  HAL           ***************/
/**************   SWC:    HIH5030       ***************/
/**************   Version: 1.00         ***************/
/******************************************************/
/******************************************************/

#include "../../LIB/STD_TYPES.h"
#include "../../LIB/ERROR_STATE.h"
#include "../../LIB/BIT_MATH.h"

#include "../../MCAL/DIO/DIO_Interface.h"

#include "../../MCAL/ADC/ADC_Interface.h"

#include "util/delay.h"

#include "HIH5030_Private.h"
#include "HIH5030_Config.h"
#include "HIH5030_Interface.h"


//#define   DHT11_PORT_ID          DIO_PORTA
//#define   DHT11_PIN_ID           DIO_PIN7

//---------------------------------------------//

//----- Functions -----------------------------//

 static u16 x_HIH5030 ,voltage_HIH5030,humidity_HIH5030 ;


/*****************************************************************************/
/*****************************************************************************/
/** Function Name   : Init_HIH5030.                                         **/
/** Return Type     : DHT_Status_t.                                         **/
/** Arguments       : void.                                                 **/
/** Functionality   : Setup sensor.                                         **/
/*****************************************************************************/
/*****************************************************************************/
/*****************************************************************************/

enum HIH5030_Status_t Init_HIH5030(){
	DIO_enuSetPinDirection(DIO_PORTA , DIO_PIN0 , INPUT);
	ADC_enuEnable();
	ADC_enuInitialize();

	ADC_enuDisableTriggeringMode();

}

/*****************************************************************************/
/*****************************************************************************/
/** Function Name   : Get_Analog_Data.                                      **/
/** Return Type     : u16.                                                  **/
/** Arguments       : void.                                                 **/
/** Functionality   : Get Analog Data..                                     **/
/*****************************************************************************/
/*****************************************************************************/
/*****************************************************************************/

u16 Get_Analog_Data (){//chanel
	
	ADC_enuSynchAnalogRead(3, &x_HIH5030);
	voltage_HIH5030 = ((x_HIH5030 * 5.0 * 1000) / 1024.0);
	return voltage_HIH5030;

}


/*****************************************************************************/
/*****************************************************************************/
/** Function Name   : Get_Tem_Data.                                         **/
/** Return Type     : u32.                                                  **/
/** Arguments       : void.                                                 **/
/** Functionality   : Get humidity Data..                                   **/
/*****************************************************************************/
/*****************************************************************************/
/*****************************************************************************/

u16 Get_hum_Data (){

	u16 data=Get_Analog_Data ();
	humidity_HIH5030 = ((data - 756)/31.64) ;
	return humidity_HIH5030;


}


